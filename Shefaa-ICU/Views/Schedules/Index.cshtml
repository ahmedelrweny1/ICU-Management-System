@{
    ViewData["Title"] = "Staff Schedules";
    ViewData["PageTitle"] = "Staff Schedules";
    ViewData["ActivePage"] = "Schedules";
    ViewData["HideSearch"] = true;
    ViewData["TopbarExtras"] = "<button class=\"btn btn-sm btn-outline-primary me-3\" onclick=\"window.print()\" data-tooltip=\"Print Schedule\"><i class=\"fas fa-print\"></i></button>";
}

<div class="page-header">
    <div>
        <h2>Staff Schedules</h2>
        <p class="text-muted">Plan and monitor ICU coverage.</p>
    </div>
    <button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#addShiftModal">
        <i class="fas fa-plus"></i> Add Shift
    </button>
</div>

<div class="row mb-4">
    @* Data: counts from Schedule table *@
    <div class="col-md-4">
        <div class="shift-card morning">
            <div class="shift-header">
                <i class="fas fa-sun"></i>
                <div>
                    <h5>Morning Shift</h5>
                    <p>08:00 AM - 04:00 PM</p>
                </div>
            </div>
            <div class="shift-count">
                <span id="morningCount">0</span> Staff Assigned
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="shift-card evening">
            <div class="shift-header">
                <i class="fas fa-cloud-sun"></i>
                <div>
                    <h5>Evening Shift</h5>
                    <p>04:00 PM - 12:00 AM</p>
                </div>
            </div>
            <div class="shift-count">
                <span id="eveningCount">0</span> Staff Assigned
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="shift-card night">
            <div class="shift-header">
                <i class="fas fa-moon"></i>
                <div>
                    <h5>Night Shift</h5>
                    <p>12:00 AM - 08:00 AM</p>
                </div>
            </div>
            <div class="shift-count">
                <span id="nightCount">0</span> Staff Assigned
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0"><i class="fas fa-calendar-week"></i> Weekly Schedule</h5>
        <div class="week-nav">
            <button class="btn btn-sm btn-outline-secondary" onclick="previousWeek()">
                <i class="fas fa-chevron-left"></i>
            </button>
            <span id="currentWeek">Week Range</span>
            <button class="btn btn-sm btn-outline-secondary" onclick="nextWeek()">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table schedule-table">
                <thead>
                    <tr>
                        <th>Day</th>
                        <th>Morning Shift<br><small>08:00 AM - 04:00 PM</small></th>
                        <th>Evening Shift<br><small>04:00 PM - 12:00 AM</small></th>
                        <th>Night Shift<br><small>12:00 AM - 08:00 AM</small></th>
                    </tr>
                </thead>
                <tbody id="scheduleTableBody">
                    @* Data: rows per day with assigned staff *@
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="card mt-4 d-none" id="conflictCard">
    <div class="card-header bg-warning">
        <h5 class="mb-0"><i class="fas fa-exclamation-triangle"></i> Scheduling Conflicts</h5>
    </div>
    <div class="card-body" id="conflictList">
        @* Data: show overlapping shifts or staffing gaps *@
    </div>
</div>

@section Modals {
    <div class="modal fade" id="addShiftModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Shift Assignment</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addShiftForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Date *</label>
                                <input type="date" class="form-control" id="shiftDate" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Shift Type *</label>
                                <select class="form-select" id="shiftType" required>
                                    <option value="">Select Shift</option>
                                    <option value="Morning">Morning (08:00 AM - 04:00 PM)</option>
                                    <option value="Evening">Evening (04:00 PM - 12:00 AM)</option>
                                    <option value="Night">Night (12:00 AM - 08:00 AM)</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Assign Staff *</label>
                            <div id="staffCheckboxes" class="staff-checkbox-container">
                                @* Data: render staff checkboxes *@
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Notes</label>
                            <textarea class="form-control" id="shiftNotes" rows="2"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveShift()">Save Shift</button>
                </div>
            </div>
        </div>
    </div>
}

@section Scripts {
    <script src="~/js/schedules.js" asp-append-version="true"></script>
}

