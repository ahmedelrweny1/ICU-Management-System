@{
    ViewData["Title"] = "My Profile";
    ViewData["PageTitle"] = "My Profile";
    ViewData["ActivePage"] = "Profile";
    ViewData["HideSearch"] = true;
}

<div class="card profile-header-card mb-4">
    <div class="profile-cover"></div>
    <div class="profile-header-content">
        <div class="profile-avatar-section">
            <div class="profile-avatar-wrapper">
                <img src="https://ui-avatars.com/api/?name=User&background=6366F1&color=fff&size=120"
                     alt="Profile" class="profile-avatar" id="profileAvatar">
                <button class="avatar-edit-btn" type="button" onclick="changeAvatar()">
                    <i class="fas fa-camera"></i>
                </button>
            </div>
            <div class="profile-header-info">
                <h2 id="profileName">Loading...</h2>
                <p class="profile-role" id="profileRole">Role</p>
                <p class="profile-email" id="profileEmail">email@example.com</p>
            </div>
        </div>
        <div class="profile-stats">
            <div class="stat-item">
                <h4 id="memberSince">0</h4>
                <p>Days Active</p>
            </div>
            <div class="stat-item">
                <h4 id="lastLogin">-</h4>
                <p>Last Login</p>
            </div>
        </div>
        @* Data: populate with current staff user info *@
    </div>
</div>

<ul class="nav nav-tabs mb-4" id="profileTabs">
    <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#personalInfo">
            <i class="fas fa-user"></i> Personal Information
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#accountSettings">
            <i class="fas fa-cog"></i> Account Settings
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#security">
            <i class="fas fa-shield-alt"></i> Security
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#notifications">
            <i class="fas fa-bell"></i> Notifications
        </a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade show active" id="personalInfo">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-user-edit"></i> Edit Personal Information</h5>
            </div>
            <div class="card-body">
                <form id="personalInfoForm">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">First Name</label>
                            <input type="text" class="form-control" id="firstName" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Last Name</label>
                            <input type="text" class="form-control" id="lastName" required>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="phone">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Role</label>
                            <input type="text" class="form-control" id="role" disabled>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Department</label>
                            <input type="text" class="form-control" id="department">
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Bio</label>
                        <textarea class="form-control" id="bio" rows="4" placeholder="Tell us about yourself..."></textarea>
                    </div>

                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="loadProfileData()">
                            <i class="fas fa-undo"></i> Reset
                        </button>
                    </div>
                </form>
                @* Data: form should bind to current Staff profile *@
            </div>
        </div>
    </div>

    <div class="tab-pane fade" id="accountSettings">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-cog"></i> Account Settings</h5>
            </div>
            <div class="card-body">
                <div class="settings-group">
                    <h6>Language & Region</h6>
                    <div class="row mb-4">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Language</label>
                            <select class="form-select">
                                <option value="en" selected>English</option>
                                <option value="ar">Arabic</option>
                                <option value="fr">French</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Timezone</label>
                            <select class="form-select">
                                <option value="utc">UTC</option>
                                <option value="est">Eastern Time (EST)</option>
                                <option value="pst">Pacific Time (PST)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="settings-group">
                    <h6>Privacy Settings</h6>
                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" id="profileVisibility" checked>
                        <label class="form-check-label" for="profileVisibility">
                            Make my profile visible to other staff members
                        </label>
                    </div>
                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" id="showOnlineStatus" checked>
                        <label class="form-check-label" for="showOnlineStatus">
                            Show my online status
                        </label>
                    </div>
                </div>

                <button class="btn btn-primary">
                    <i class="fas fa-save"></i> Save Preferences
                </button>
            </div>
        </div>
    </div>

    <div class="tab-pane fade" id="security">
        <div class="card mb-4">
            <div class="card-header">
                <h5><i class="fas fa-key"></i> Change Password</h5>
            </div>
            <div class="card-body">
                <form id="changePasswordForm">
                    <div class="mb-3">
                        <label class="form-label">Current Password</label>
                        <input type="password" class="form-control" id="currentPassword" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">New Password</label>
                        <input type="password" class="form-control" id="newPassword" required minlength="8">
                        <small class="text-muted">Minimum 8 characters</small>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Confirm New Password</label>
                        <input type="password" class="form-control" id="confirmNewPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-lock"></i> Update Password
                    </button>
                </form>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-shield-alt"></i> Two-Factor Authentication</h5>
            </div>
            <div class="card-body">
                <p class="text-muted">Add an extra layer of security to your account</p>
                <button class="btn btn-outline-primary">
                    <i class="fas fa-mobile-alt"></i> Enable 2FA
                </button>
            </div>
        </div>
    </div>

    <div class="tab-pane fade" id="notifications">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-bell"></i> Notification Preferences</h5>
            </div>
            <div class="card-body">
                <div class="notification-settings">
                    <div class="notification-item">
                        <div>
                            <h6>Patient Updates</h6>
                            <p class="text-muted small">Receive notifications when patient status changes</p>
                        </div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="notifPatients" checked>
                        </div>
                    </div>

                    <div class="notification-item">
                        <div>
                            <h6>Room Assignments</h6>
                            <p class="text-muted small">Get notified about room availability and assignments</p>
                        </div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="notifRooms" checked>
                        </div>
                    </div>

                    <div class="notification-item">
                        <div>
                            <h6>Schedule Changes</h6>
                            <p class="text-muted small">Alerts for shift schedule updates</p>
                        </div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="notifSchedule" checked>
                        </div>
                    </div>

                    <div class="notification-item">
                        <div>
                            <h6>Email Notifications</h6>
                            <p class="text-muted small">Receive email alerts for important updates</p>
                        </div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="notifEmail">
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary mt-3">
                    <i class="fas fa-save"></i> Save Notification Settings
                </button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/profile.js" asp-append-version="true"></script>
}

