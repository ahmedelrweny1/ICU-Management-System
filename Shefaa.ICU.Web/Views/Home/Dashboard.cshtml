@{
    Layout = "_LayoutMain";
    ViewData["Title"] = "Dashboard";
    ViewData["PageTitle"] = "Dashboard";
    ViewData["SearchPlaceholder"] = "Search...";
}

<div class="page-header">
    <h2>Dashboard</h2>
</div>

<!-- Statistics Cards -->
<div class="stats-grid">
    <div class="stat-card bg-primary">
        <div class="stat-icon">
            <i class="fas fa-bed"></i>
        </div>
        <div class="stat-details">
            <h3 id="totalRooms">@ViewBag.TotalRooms</h3>
            <p>Total Rooms</p>
        </div>
    </div>
    
    <div class="stat-card bg-success">
        <div class="stat-icon">
            <i class="fas fa-user-injured"></i>
        </div>
        <div class="stat-details">
            <h3 id="totalPatients">@ViewBag.TotalPatients</h3>
            <p>Current Patients</p>
        </div>
    </div>
    
    <div class="stat-card bg-info">
        <div class="stat-icon">
            <i class="fas fa-user-md"></i>
        </div>
        <div class="stat-details">
            <h3 id="totalStaff">@ViewBag.TotalStaff</h3>
            <p>Medical Staff</p>
        </div>
    </div>
    
    <div class="stat-card bg-danger">
        <div class="stat-icon">
            <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="stat-details">
            <h3 id="criticalCases">@ViewBag.CriticalCases</h3>
            <p>Critical Cases</p>
        </div>
    </div>
    
    <div class="stat-card bg-warning">
        <div class="stat-icon">
            <i class="fas fa-door-open"></i>
        </div>
        <div class="stat-details">
            <h3 id="availableRooms">@ViewBag.AvailableRooms</h3>
            <p>Available Rooms</p>
        </div>
    </div>
    
    <div class="stat-card bg-success">
        <div class="stat-icon">
            <i class="fas fa-user-check"></i>
        </div>
        <div class="stat-details">
            <h3 id="staffOnDuty">@ViewBag.StaffOnDuty</h3>
            <p>Staff On Duty</p>
        </div>
    </div>
</div>

<!-- Charts Row -->
<div class="row mt-4">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-chart-line"></i> Weekly Occupancy Rate</h5>
            </div>
            <div class="card-body">
                <canvas id="occupancyChart"></canvas>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-chart-pie"></i> Room Status</h5>
            </div>
            <div class="card-body">
                <canvas id="roomStatusChart"></canvas>
            </div>
        </div>
    </div>
</div>

<!-- Activity and Staff -->
<div class="row mt-4">
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-history"></i> Recent Activities</h5>
            </div>
            <div class="card-body">
                <div class="activity-feed" id="activityFeed">
                    @if (ViewBag.Activities != null)
                    {
                        foreach (var activity in ViewBag.Activities)
                        {
                            <div class="activity-item">
                                <div class="activity-time">@activity.Time</div>
                                <div class="activity-text">@activity.Text</div>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-users"></i> Staff On Duty</h5>
            </div>
            <div class="card-body">
                <div class="staff-list" id="staffOnDutyList">
                    @if (ViewBag.OnDutyStaff != null)
                    {
                        foreach (var member in ViewBag.OnDutyStaff)
                        {
                            <div class="staff-item">
                                <img src="https://ui-avatars.com/api/?name=@Uri.EscapeDataString(member.Name)&background=random" alt="@member.Name">
                                <div class="staff-info">
                                    <h6>@member.Name</h6>
                                    <p>@member.Role - @member.Specialty</p>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Current Shift Info -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-clock"></i> Current Shift Information</h5>
            </div>
            <div class="card-body">
                <div class="shift-info" id="currentShiftInfo">
                    <div class="shift-detail">
                        <strong>Shift:</strong> <span id="currentShift">Morning Shift</span>
                    </div>
                    <div class="shift-detail">
                        <strong>Time:</strong> <span id="shiftTime">08:00 AM - 04:00 PM</span>
                    </div>
                    <div class="shift-detail">
                        <strong>Staff Count:</strong> <span id="shiftStaffCount">@ViewBag.StaffOnDuty</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/dashboard.js"></script>
}

